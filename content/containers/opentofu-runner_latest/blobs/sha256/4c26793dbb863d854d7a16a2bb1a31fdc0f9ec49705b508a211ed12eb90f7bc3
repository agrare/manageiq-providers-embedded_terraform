{"created":"2024-04-03T19:09:57.751401937Z","architecture":"amd64","os":"linux","config":{"Env":["PATH=/usr/local/bundle/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin","LANG=C.UTF-8","RUBY_MAJOR=3.0","RUBY_VERSION=3.0.6","RUBY_DOWNLOAD_SHA256=b5cbee93e62d85cfb2a408c49fa30a74231ae8409c2b3858e5f5ea254d7ddbd1","GEM_HOME=/usr/local/bundle","BUNDLE_SILENCE_ROOT_WARNING=1","BUNDLE_APP_CONFIG=/usr/local/bundle"],"Cmd":["./opentofu-runner.rb"],"WorkingDir":"/usr/src/app","Labels":{"io.buildah.version":"1.33.5"},"ArgsEscaped":true},"rootfs":{"type":"layers","diff_ids":["sha256:5535fda0356bb3eff348b2f618314a47946d7ccfbeb880b3fc910dd7375ae140","sha256:5e8ea851f691b2de882a82241a8b14fc21de5f221cbad58aab4196f793bc7658","sha256:ab5df29db12ef51f51c4259f2aa30567b36325d35ce7046f2fd30339ef757044","sha256:cd729e35d40b868a07d9b184ae3b62741be063729e82f550031e6efe85b70bb8","sha256:4ae26f30f4995840aa1880c587a165263ac4f22561129c64751050b186ae5c85","sha256:d3d3754db28d9bee016a5ded0e27b58f5ae50aec04d534d753eef00e5eca1657"]},"history":[{"created":"2023-05-15T21:50:09Z","created_by":"/bin/sh -c #(nop) ADD file:b308dfeecaa300a430b4e65e312a48eb5f191df7754e93ff4e7b2d04016b3ca7 in / "},{"created":"2023-05-15T21:50:09Z","created_by":"/bin/sh -c #(nop)  CMD [\"/bin/sh\"]","empty_layer":true},{"created":"2023-05-15T21:50:09Z","created_by":"RUN /bin/sh -c set -eux; \tapk add --no-cache \t\tbzip2 \t\tca-certificates \t\tgmp-dev \t\tlibffi-dev \t\tprocps \t\tyaml-dev \t\tzlib-dev \t; # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2023-05-15T21:50:09Z","created_by":"RUN /bin/sh -c set -eux; \tmkdir -p /usr/local/etc; \t{ \t\techo 'install: --no-document'; \t\techo 'update: --no-document'; \t} \u003e\u003e /usr/local/etc/gemrc # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2023-05-15T21:50:09Z","created_by":"ENV LANG=C.UTF-8","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2023-05-15T21:50:09Z","created_by":"ENV RUBY_MAJOR=3.0","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2023-05-15T21:50:09Z","created_by":"ENV RUBY_VERSION=3.0.6","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2023-05-15T21:50:09Z","created_by":"ENV RUBY_DOWNLOAD_SHA256=b5cbee93e62d85cfb2a408c49fa30a74231ae8409c2b3858e5f5ea254d7ddbd1","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2023-05-15T21:50:09Z","created_by":"RUN /bin/sh -c set -eux; \t\tapk add --no-cache --virtual .ruby-builddeps \t\tautoconf \t\tbison \t\tbzip2 \t\tbzip2-dev \t\tca-certificates \t\tcoreutils \t\tdpkg-dev dpkg \t\tg++ \t\tgcc \t\tgdbm-dev \t\tglib-dev \t\tlibc-dev \t\tlibffi-dev \t\tlibxml2-dev \t\tlibxslt-dev \t\tlinux-headers \t\tmake \t\tncurses-dev \t\topenssl \t\topenssl-dev \t\tpatch \t\tprocps \t\treadline-dev \t\truby \t\ttar \t\txz \t\tyaml-dev \t\tzlib-dev \t; \t\twget -O ruby.tar.xz \"https://cache.ruby-lang.org/pub/ruby/${RUBY_MAJOR%-rc}/ruby-$RUBY_VERSION.tar.xz\"; \techo \"$RUBY_DOWNLOAD_SHA256 *ruby.tar.xz\" | sha256sum --check --strict; \t\tmkdir -p /usr/src/ruby; \ttar -xJf ruby.tar.xz -C /usr/src/ruby --strip-components=1; \trm ruby.tar.xz; \t\tcd /usr/src/ruby; \t\twget -O 'thread-stack-fix.patch' 'https://bugs.ruby-lang.org/attachments/download/7081/0001-thread_pthread.c-make-get_main_stack-portable-on-lin.patch'; \techo '3ab628a51d92fdf0d2b5835e93564857aea73e0c1de00313864a94a6255cb645 *thread-stack-fix.patch' | sha256sum --check --strict; \tpatch -p1 -i thread-stack-fix.patch; \trm thread-stack-fix.patch; \t\texport ac_cv_func_isnan=yes ac_cv_func_isinf=yes; \t\t{ \t\techo '#define ENABLE_PATH_CHECK 0'; \t\techo; \t\tcat file.c; \t} \u003e file.c.new; \tmv file.c.new file.c; \t\tautoconf; \tapkArch=\"$(apk --print-arch)\"; \tcase \"$apkArch\" in \t\ts390x | armhf | armv7) \t\t\tapk add --no-cache libucontext-dev; \t\t\texport LIBS='-lucontext'; \t\t\t;; \tesac; \tgnuArch=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\"; \t./configure \t\t--build=\"$gnuArch\" \t\t--disable-install-doc \t\t--enable-shared \t; \tmake -j \"$(nproc)\"; \tmake install; \t\trunDeps=\"$( \t\tscanelf --needed --nobanner --format '%n#p' --recursive /usr/local \t\t\t| tr ',' '\\n' \t\t\t| sort -u \t\t\t| awk 'system(\"[ -e /usr/local/lib/\" $1 \" ]\") == 0 { next } { print \"so:\" $1 }' \t)\"; \tapk add --no-network --virtual .ruby-rundeps $runDeps; \tapk del --no-network .ruby-builddeps; \t\tcd /; \trm -r /usr/src/ruby; \tif \t\tapk --no-network list --installed \t\t\t| grep -v '^[.]ruby-rundeps' \t\t\t| grep -i ruby \t; then \t\texit 1; \tfi; \t[ \"$(command -v ruby)\" = '/usr/local/bin/ruby' ]; \truby --version; \tgem --version; \tbundle --version # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2023-05-15T21:50:09Z","created_by":"ENV GEM_HOME=/usr/local/bundle","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2023-05-15T21:50:09Z","created_by":"ENV BUNDLE_SILENCE_ROOT_WARNING=1 BUNDLE_APP_CONFIG=/usr/local/bundle","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2023-05-15T21:50:09Z","created_by":"ENV PATH=/usr/local/bundle/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2023-05-15T21:50:09Z","created_by":"RUN /bin/sh -c mkdir -p \"$GEM_HOME\" \u0026\u0026 chmod 1777 \"$GEM_HOME\" # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2023-05-15T21:50:09Z","created_by":"CMD [\"irb\"]","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2024-04-03T19:09:57.49701654Z","created_by":"/bin/sh -c #(nop) WORKDIR /usr/src/app","comment":"FROM docker.io/library/ruby:3.0.6-alpine","empty_layer":true},{"created":"2024-04-03T19:09:57.655792154Z","created_by":"/bin/sh -c #(nop) COPY dir:895f62156ad660776f0169ef73d1b39c5ed43dec20bf8ae61c8b8337b3a99eec in . ","comment":"FROM 893852444533"},{"created":"2024-04-03T19:09:57.751840632Z","created_by":"/bin/sh -c #(nop) CMD [\"./opentofu-runner.rb\"]","comment":"FROM 12fee3208002","empty_layer":true}]}